---
title: "Reproducible Research: Peer Assessment 1"
output: 
  html_document:
    keep_md: true
---

## Housekeeping

Clear Environment and Console
```{r clear_environment, echo=TRUE, results='hide'}
rm(list=ls())
cat('\014')
```

packageR is a function used to install R Packages.<br />
packageR is invoked, and packages installed, only when needed

```{r packageR, echo=TRUE, results='hide'}
packageR <- function(pkg){
     if (!require(pkg,character.only = TRUE))
     {
          install.packages(pkg,dep=TRUE)
          if(!require(pkg,character.only = TRUE)) {
               stop("Package not found")
          } else {
               library(pkg,character.only=TRUE)
          }
     }
}

packageR("datasets")
packageR("ProjectTemplate")
packageR("ggplot2")
packageR("scales")
packageR("rmarkdown")
packageR("data.table")
packageR("dplyr")
packageR("lubridate")
packageR("Hmisc")
```

pathR is a function to simplify multi-device development.<br />
pathR is used to set 'path_to_data' as appropriate for my machines

```{r pathr, echo=TRUE, results='hide'}
pathR <- function(machine,course){
     machine.path <- "/Users/rickwrites/Dropbox/Data-Science/Coursera/"
     if(machine != "iMac"){
          machine.path <- "/Users/Rick/Dropbox/Data-Science/Coursera/"
     }
     paste(machine.path,course,sep="")
}

getwd()
course <- "DS-05-Reproducible/RepData_PeerAssessment1"
working.directory <- pathR('iMac',course)
setwd(working.directory) ## Make it so, Number One (set the Working Directory to the applicable path for current machine)
getwd()

```

## Loading and preprocessing the data

```{r load_data, echo=TRUE}
csv.name <- "activity.csv"

if (!file.exists(csv.name)){
     unzip("activity.zip")
}

activity.dt <- fread("activity.csv",na.string="NA")
```

Coerce 'date' from CHR into DATE data type

```{r convert_date, echo=TRUE}
activity.dt$date <- ymd(activity.dt$date)
```

Verify data.table and conversion

```{r verify.01, echo=TRUE}
print(str(activity.dt))
print(nrow(activity.dt))
head(activity.dt,20)
```

## What is mean total number of steps taken per day?
Note from Instructions: <i>"...ignore the missing values in the dataset"</i><br />
1. Calculate the total number of steps taken per day

```{r sum_total_steps_by_day, echo=TRUE}
steps.summed.by.date <- activity.dt[,lapply(.SD,sum,na.rm=TRUE),by=date,.SDcols='steps']
```

Verify conversion

```{r verify.02, echo=TRUE}
print(str(steps.summed.by.date))
print(steps.summed.by.date)
```

2. Make a histogram of the total number of steps taken each day

```{r histogram_total_steps_by_date, echo=TRUE}
p <- ggplot(data = activity.dt, aes(x = date, y = steps))
p <- p + geom_histogram(binwidth = 0.01)
p <- p + ggtitle("Count of Steps Grouped by Date")

print(p)
```


## What is the average daily activity pattern?



## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?

